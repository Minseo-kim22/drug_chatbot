import pandas as pd
import re

# 1. ë°ì´í„° ë¡œë“œ ë° ì „ì²˜ë¦¬
# .py ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì¼í•œ í´ë”ì— ìˆëŠ” 'druglist.csv' íŒŒì¼ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
file_path = r'druglist.csv' 
try:
    # íŒŒì¼ì´ UTF-8ë¡œ ë³€í™˜ë˜ì—ˆìœ¼ë¯€ë¡œ 'utf-8'ë¡œ ì½ì–´ì˜µë‹ˆë‹¤.
    df = pd.read_csv(file_path, encoding='utf-8')
    df['ìƒì„¸ì •ë³´'] = df['ìƒì„¸ì •ë³´'].fillna('ìƒí˜¸ì‘ìš© ì •ë³´ ì—†ìŒ')
    print("âœ… ì•½ë¬¼ ìƒí˜¸ì‘ìš© ë°ì´í„° ë¡œë“œ ì„±ê³µ!")
except FileNotFoundError:
    print(f"âŒ '{file_path}' íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê²½ë¡œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.")
    print("   (íŒŒì¼ì„ .py íŒŒì¼ê³¼ ê°™ì€ í´ë”ì— ë„£ê³ , íŒŒì¼ ì´ë¦„ì„ í™•ì¸í•´ì£¼ì„¸ìš”!)")
    exit()
except UnicodeDecodeError:
    # UTF-8ë¡œ ì½ê¸° ì‹¤íŒ¨ ì‹œ
    print(f"âŒ '{file_path}' íŒŒì¼ì˜ ì¸ì½”ë”© í˜•ì‹ì„ í™•ì¸í•´ì£¼ì„¸ìš”. (UTF-8ë¡œ ì½ê¸° ì‹¤íŒ¨)")
    print("   (íŒŒì¼ì„ ë©”ëª¨ì¥ìœ¼ë¡œ ì—´ì–´ 'ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ì €ì¥' -> ì¸ì½”ë”©ì„ 'UTF-8'ë¡œ ë³€ê²½ í›„ ì‹œë„í•´ë³´ì„¸ìš”.)")
    exit()
except Exception as e:
    print(f"âŒ íŒŒì¼ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}")
    exit()


# 2. ìœ ì—°í•œ ì•½ë¬¼ ì •ë³´ ê²€ìƒ‰ í•¨ìˆ˜
def find_drug_info(df, query):
    """ì‚¬ìš©ì ì¿¼ë¦¬ë¡œë¶€í„° ì•½ë¬¼ ê´€ë ¨ ì •ë³´ë¥¼ ìœ ì—°í•˜ê²Œ ê²€ìƒ‰í•©ë‹ˆë‹¤."""
    # ì¿¼ë¦¬ ì „ì²˜ë¦¬: ê´„í˜¸, ìš©ëŸ‰ ì •ë³´, ì œí˜• ê´€ë ¨ ë‹¨ì–´ ì œê±°
    cleaned_query = re.sub(r'\(.*?\)|\[.*?\]|\d+m?g?l?|ì£¼ì‚¬ì œ|ì •ì œ|ì •|ì•½|ìº¡ìŠ|ì‹œëŸ½', '', query).strip()
    if not cleaned_query:
        return pd.DataFrame() # ë¹ˆ ì¿¼ë¦¬ ì²˜ë¦¬

    try:
        # ëª¨ë“  ì•½ë¬¼ ê´€ë ¨ ì»¬ëŸ¼ì—ì„œ ì¿¼ë¦¬ ê²€ìƒ‰ (ëŒ€ì†Œë¬¸ì ë¬´ì‹œ)
        search_pattern = re.escape(cleaned_query) # íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„
        search_results = df[
            df['ì œí’ˆëª…A'].str.contains(search_pattern, na=False, case=False) |
            df['ì„±ë¶„ëª…A'].str.contains(search_pattern, na=False, case=False) |
            df['ì œí’ˆëª…B'].str.contains(search_pattern, na=False, case=False) |
            df['ì„±ë¶„ëª…B'].str.contains(search_pattern, na=False, case=False)
        ]
    except Exception as e:
        print(f"DEBUG: find_drug_infoì—ì„œ ì˜¤ë¥˜ ë°œìƒ - {e}")
        return pd.DataFrame()

    return search_results

# 3. ì•½ë¬¼ ìƒí˜¸ì‘ìš© í‰ê°€ í•¨ìˆ˜
def check_drug_interaction_flexible(df, drug_A_query, drug_B_query):
    """ë‘ ì•½ë¬¼ ì¿¼ë¦¬ì— ëŒ€í•´ ìƒí˜¸ì‘ìš© ìœ„í—˜ë„ë¥¼ í‰ê°€í•©ë‹ˆë‹¤."""
    
    results_A = find_drug_info(df, drug_A_query)
    results_B = find_drug_info(df, drug_B_query)

    if results_A.empty:
        return "ì •ë³´ ì—†ìŒ", f"'{drug_A_query}'ì— ëŒ€í•œ ì•½ë¬¼ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
    if results_B.empty:
        return "ì •ë³´ ì—†ìŒ", f"'{drug_B_query}'ì— ëŒ€í•œ ì•½ë¬¼ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."

    # ê²€ìƒ‰ëœ ì•½ë¬¼ë“¤ì˜ ê³ ìœ í•œ ì œí’ˆëª…/ì„±ë¶„ëª… ì§‘í•© ìƒì„±
    drugs_A = set(results_A['ì œí’ˆëª…A']).union(set(results_A['ì„±ë¶„ëª…A'])).union(set(results_A['ì œí’ˆëª…B'])).union(set(results_A['ì„±ë¶„ëª…B']))
    drugs_B = set(results_B['ì œí’ˆëª…A']).union(set(results_B['ì„±ë¶„ëª…A'])).union(set(results_B['ì œí’ˆëª…B'])).union(set(results_B['ì„±ë¶„ëª…B']))

    # NaN ê°’ ì œê±°
    drugs_A.discard(pd.NA)
    drugs_A.discard(None)
    drugs_B.discard(pd.NA)
    drugs_B.discard(None)
    
    # ì¿¼ë¦¬ ìì²´ë„ ê²€ìƒ‰ ëŒ€ìƒì— í¬í•¨ (ì „ì²˜ë¦¬ëœ ì¿¼ë¦¬ ì‚¬ìš©)
    cleaned_A = re.sub(r'\(.*?\)|\[.*?\]|\d+m?g?l?|ì£¼ì‚¬ì œ|ì •ì œ|ì •|ì•½|ìº¡ìŠ|ì‹œëŸ½', '', drug_A_query).strip()
    cleaned_B = re.sub(r'\(.*?\)|\[.*?\]|\d+m?g?l?|ì£¼ì‚¬ì œ|ì •ì œ|ì •|ì•½|ìº¡ìŠ|ì‹œëŸ½', '', drug_B_query).strip()
    if cleaned_A: drugs_A.add(cleaned_A)
    if cleaned_B: drugs_B.add(cleaned_B)

    interactions = pd.DataFrame()

    # dfì—ì„œ (drug_A, drug_B) ë˜ëŠ” (drug_B, drug_A) ì¡°í•© ì°¾ê¸°
    for a in drugs_A:
        for b in drugs_B:
            if a == b or not a or not b: continue # ê°™ì€ ì•½ë¬¼ ë¹„êµ, ë¹ˆ ë¬¸ìì—´ ê±´ë„ˆëœ€
            
            try:
                a_pattern = re.escape(str(a))
                b_pattern = re.escape(str(b))

                # (A, B) ì¡°í•© ê²€ìƒ‰ (ëŒ€ì†Œë¬¸ì ë¬´ì‹œ)
                interaction_rows_1 = df[
                    (df['ì œí’ˆëª…A'].str.contains(a_pattern, na=False, case=False) | df['ì„±ë¶„ëª…A'].str.contains(a_pattern, na=False, case=False)) &
                    (df['ì œí’ˆëª…B'].str.contains(b_pattern, na=False, case=False) | df['ì„±ë¶„ëª…B'].str.contains(b_pattern, na=False, case=False))
                ]
                
                # (B, A) ì¡°í•© ê²€ìƒ‰ (ëŒ€ì†Œë¬¸ì ë¬´ì‹œ)
                interaction_rows_2 = df[
                    (df['ì œí’ˆëª…A'].str.contains(b_pattern, na=False, case=False) | df['ì„±ë¶„ëª…A'].str.contains(b_pattern, na=False, case=False)) &
                    (df['ì œí’ˆëª…B'].str.contains(a_pattern, na=False, case=False) | df['ì„±ë¶„ëª…B'].str.contains(a_pattern, na=False, case=False))
                ]
                
                if not interaction_rows_1.empty:
                    interactions = pd.concat([interactions, interaction_rows_1])
                if not interaction_rows_2.empty:
                    interactions = pd.concat([interactions, interaction_rows_2])
            except re.error as e:
                print(f"DEBUG: ì •ê·œì‹ ì˜¤ë¥˜ ë°œìƒ (a='{a}', b='{b}') - {e}")
                continue


    if interactions.empty:
        return "ì•ˆì „", f"'{drug_A_query}'ì™€ '{drug_B_query}' ê°„ì˜ ìƒí˜¸ì‘ìš© ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤."

    # ì¤‘ë³µ ì œê±°
    interactions = interactions.drop_duplicates()

    # ìœ„í—˜ë„ íŒë‹¨ ë¡œì§ (í‚¤ì›Œë“œ)
    dangerous_keywords = ["ê¸ˆê¸°", "íˆ¬ì—¬ ê¸ˆì§€", "ë…ì„± ì¦ê°€", "ì¹˜ëª…ì ì¸", "ì‹¬ê°í•œ", "ìœ ì‚° ì‚°ì„±ì¦", "ê³ ì¹¼ë¥¨í˜ˆì¦", "ì‹¬ì‹¤ì„± ë¶€ì •ë§¥", "ìœ„í—˜ì„± ì¦ê°€", "ìœ„í—˜ ì¦ê°€", "ì‹¬ì¥ ë¶€ì •ë§¥", "QTê°„ê²© ì—°ì¥ ìœ„í—˜ ì¦ê°€", "QTì—°ì¥", "ì‹¬ë¶€ì •ë§¥", "ì¤‘ëŒ€í•œ", "ì‹¬ì¥ ëª¨ë‹ˆí„°ë§", "ë³‘ìš©ê¸ˆê¸°", "Torsade de pointes ìœ„í—˜ ì¦ê°€", "ìœ„í—˜ì´ ì¦ê°€í•¨", "ì•½ë¬¼ì´ìƒë°˜ì‘ ë°œìƒ ìœ„í—˜", "ë…ì„±", "í—ˆí˜ˆ", "í˜ˆê´€ê²½ë ¨", ]
    caution_keywords = ["ì¹˜ë£Œ íš¨ê³¼ê°€ ì œí•œì ", "ì¤‘ì¦ì˜ ìœ„ì¥ê´€ê³„ ì´ìƒë°˜ì‘", "Alfuzosin í˜ˆì¤‘ë†ë„ ì¦ê°€", "ì–‘ìª½ ì•½ë¬¼ ëª¨ë‘ í˜ˆì¥ë†ë„ ìƒìŠ¹ ê°€ëŠ¥", "Amiodarone í˜ˆì¤‘ë†ë„ ì¦ê°€", "í˜ˆì¤‘ë†ë„ ì¦ê°€", "íš¡ë¬¸ê·¼ìœµí•´ì™€ ê°™ì€ ì¤‘ì¦ì˜ ê·¼ìœ¡ì´ìƒ ë³´ê³ ",  "í˜ˆì¥ ë†ë„ ì¦ê°€", "Finerenone í˜ˆì¤‘ë†ë„ì˜ í˜„ì €í•œ ì¦ê°€ê°€ ì˜ˆìƒë¨"]


    risk_level = "ì•ˆì „" # ê¸°ë³¸ê°’
    reasons = []
    processed_details = set() # ì¤‘ë³µëœ ìƒì„¸ì •ë³´ ì¶œë ¥ì„ ë§‰ê¸° ìœ„í•¨

    for detail in interactions['ìƒì„¸ì •ë³´'].unique():
        if detail in processed_details:
            continue
        
        detail_str = str(detail)
        processed_details.add(detail)
        
        found_danger = False
        for keyword in dangerous_keywords:
            if keyword in detail_str:
                risk_level = "ìœ„í—˜" # ìœ„í—˜ í‚¤ì›Œë“œê°€ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ 'ìœ„í—˜'
                reasons.append(f"ğŸš¨ ìœ„í—˜: {detail_str}")
                found_danger = True
                break # ì´ ìƒì„¸ì •ë³´ëŠ” 'ìœ„í—˜'ìœ¼ë¡œ í™•ì •
        
        if not found_danger:
            for keyword in caution_keywords:
                if keyword in detail_str:
                    if risk_level != "ìœ„í—˜": # 'ìœ„í—˜'ì´ ì•„ë‹ ë•Œë§Œ 'ì£¼ì˜'ë¡œ ì„¤ì •
                        risk_level = "ì£¼ì˜"
                    reasons.append(f"âš ï¸ ì£¼ì˜: {detail_str}")
                    break # 'ì£¼ì˜' í‚¤ì›Œë“œ í•˜ë‚˜ ì°¾ìœ¼ë©´ ë‹¤ìŒ ìƒì„¸ì •ë³´ë¡œ
    
    if not reasons:
        # ìƒí˜¸ì‘ìš©ì€ ìˆìœ¼ë‚˜, í‚¤ì›Œë“œì— ê±¸ë¦¬ì§€ ì•Šì€ ê²½ìš°
        risk_level = "ì •ë³´ í™•ì¸"
        reasons.append("â„¹ï¸ ìƒí˜¸ì‘ìš© ì •ë³´ê°€ ìˆìœ¼ë‚˜, ì§€ì •ëœ ìœ„í—˜/ì£¼ì˜ í‚¤ì›Œë“œëŠ” ë°œê²¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì „ë¬¸ê°€ì™€ ìƒë‹´í•˜ì„¸ìš”.")
        # ì°¸ê³ ìš©ìœ¼ë¡œ ëª¨ë“  ìƒì„¸ì •ë³´ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
        for detail in interactions['ìƒì„¸ì •ë³´'].unique():
             if str(detail) not in processed_details: # ì´ë¯¸ ì¶”ê°€ëœ ê²ƒ ì œì™¸
                reasons.append(f"â„¹ï¸ ì •ë³´: {str(detail)}")
            

    return risk_level, "\n".join(reasons)

# 4. ì±—ë´‡ ì¸í„°í˜ì´ìŠ¤ (ì½˜ì†” ê¸°ë°˜)
def start_chatbot():
    """ì½˜ì†”ì—ì„œ ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ì±—ë´‡ì„ ì‹œì‘í•©ë‹ˆë‹¤."""
    print("="*50)
    print("ì•ˆë…•í•˜ì„¸ìš”! ì•½ë¬¼ ìƒí˜¸ì‘ìš© ì±—ë´‡ì…ë‹ˆë‹¤.")
    print("ë‘ ì•½ë¬¼ì„ í•¨ê»˜ ë³µìš©í•´ë„ ë˜ëŠ”ì§€, í˜¹ì€ ì•½ë¬¼ì˜ ì„±ë¶„ì„ ì•Œë ¤ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
    print("\n[ì§ˆë¬¸ ì˜ˆì‹œ]")
    print("1. (A)ì•½ë¬¼ê³¼ (B)ì•½ë¬¼ì„ ê°™ì´ ë³µìš©í•´ë„ ë¼?")
    print("2. (A)ì•½ë¬¼ ì„±ë¶„ì´ ë­ì•¼?")
    print("\nì¢…ë£Œí•˜ë ¤ë©´ 'ì¢…ë£Œ' ë˜ëŠ” 'exit'ì„ ì…ë ¥í•˜ì„¸ìš”.")
    print("="*50)

    while True:
        user_input = input("\nğŸ‘‰ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”: ")
        if user_input.lower() in ['ì¢…ë£Œ', 'exit']:
            print("\nì±—ë´‡ì„ ì¢…ë£Œí•©ë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ’Š")
            break

        # ì§ˆë¬¸ ìœ í˜• ë¶„ì„
        
        # 1. ì„±ë¶„ ì§ˆë¬¸
        # ì˜ˆ: "íƒ€ì´ë ˆë†€ ì„±ë¶„ì´ ë­ì•¼?", "íƒ€ì´ë ˆë†€ ì„±ë¶„ ì•Œë ¤ì¤˜"
        match_component = re.match(r'(.+?)(?: ì„±ë¶„ì´ ë­ì•¼| ì„±ë¶„ ë­ì•¼| ì„±ë¶„ ì•Œë ¤ì¤˜)\??', user_input)
        if match_component:
            drug_name = match_component.group(1).strip('() ').strip()
            if drug_name:
                results = find_drug_info(df, drug_name)
                if not results.empty:
                    components = set()
                    
                    # ê²€ìƒ‰ëœ ì•½ë¬¼ê³¼ ë§¤ì¹­ë˜ëŠ” ì„±ë¶„ ì°¾ê¸°
                    pattern = re.escape(drug_name)
                    
                    for _, row in results.iterrows():
                        # ì œí’ˆëª…A/Bê°€ ì¿¼ë¦¬ì™€ ì¼ì¹˜í•˜ë©´, ì„±ë¶„ëª…A/Bë¥¼ ì¶”ê°€
                        if pd.notna(row['ì œí’ˆëª…A']) and re.search(pattern, row['ì œí’ˆëª…A'], re.IGNORECASE):
                            if pd.notna(row['ì„±ë¶„ëª…A']): components.add(row['ì„±ë¶„ëª…A'])
                        if pd.notna(row['ì œí’ˆëª…B']) and re.search(pattern, row['ì œí’ˆëª…B'], re.IGNORECASE):
                            if pd.notna(row['ì„±ë¶„ëª…B']): components.add(row['ì„±ë¶„ëª…B'])
                        # ì„±ë¶„ëª…A/Bê°€ ì¿¼ë¦¬ì™€ ì¼ì¹˜í•˜ë©´, í•´ë‹¹ ì„±ë¶„ëª…ì„ ì¶”ê°€
                        if pd.notna(row['ì„±ë¶„ëª…A']) and re.search(pattern, row['ì„±ë¶„ëª…A'], re.IGNORECASE):
                            components.add(row['ì„±ë¶„ëª…A'])
                        if pd.notna(row['ì„±ë¶„ëª…B']) and re.search(pattern, row['ì„±ë¶„ëª…B'], re.IGNORECASE):
                            components.add(row['ì„±ë¶„ëª…B']) # 'ì„±Fë¶„ëª…B' ì˜¤íƒ€ ìˆ˜ì •

                    if components:
                        print(f"âœ… '{drug_name}'ì˜ ê´€ë ¨ ì„±ë¶„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤: {', '.join(components)}")
                    else:
                        print(f"â„¹ï¸ '{drug_name}'ì„(ë¥¼) ì°¾ì•˜ìœ¼ë‚˜, ì—°ê´€ëœ ì„±ë¶„ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")
                else:
                    print(f"âŒ '{drug_name}' ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
            else:
                print("âŒ ì–´ë–¤ ì•½ë¬¼ì˜ ì„±ë¶„ì„ ì•Œê³  ì‹¶ìœ¼ì‹ ê°€ìš”? ì•½ë¬¼ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
        
        # 2. ìƒí˜¸ì‘ìš© ì§ˆë¬¸
        # ì˜ˆ: "íƒ€ì´ë ˆë†€ê³¼ ì•„ìŠ¤í”¼ë¦°ì„ ê°™ì´ ë³µìš©í•´ë„ ë¼?"
        # ì˜ˆ: "íƒ€ì´ë ˆë†€ ì•„ìŠ¤í”¼ë¦° ê°™ì´ ë¨¹ì–´ë„ ë¼"
        # ì˜ˆ: "íƒ€ì´ë ˆë†€ì´ë‘ ì•„ìŠ¤í”¼ë¦°" (ê°„ë‹¨í•œ í˜•íƒœ)
        match_interaction = re.match(r'(.+?)(?:ê³¼|ì™€|ë‘|í•˜ê³ )\s+(.+?)(?:ë¥¼|ì„)?\s+(?:ê°™ì´|í•¨ê»˜)\s+(?:ë³µìš©í•´ë„|ë¨¹ì–´ë„)\s+(?:ë¼|ë˜ë‚˜|ë ê¹Œ|ë˜ë‚˜ìš”)\??', user_input)
        
        if not match_interaction:
             # ê°„ë‹¨í•œ í˜•íƒœ: "ì•½ë¬¼A ì•½ë¬¼B"
             match_interaction_simple = re.match(r'^\s*([^\s]+)\s+([^\s]+)\s*$', user_input)
             if match_interaction_simple:
                 match_interaction = match_interaction_simple # ë™ì¼í•œ ë¡œì§ìœ¼ë¡œ ì²˜ë¦¬

        if match_interaction:
            drug_A_query = match_interaction.group(1).strip('() ').strip()
            drug_B_query = match_interaction.group(2).strip('() ').strip()
            
            if drug_A_query and drug_B_query:
                print(f"ğŸ”„ '{drug_A_query}'ì™€ '{drug_B_query}'ì˜ ìƒí˜¸ì‘ìš©ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤...")
                risk, explanation = check_drug_interaction_flexible(df, drug_A_query, drug_B_query)
                print("\n" + "="*20 + " [ê²€ìƒ‰ ê²°ê³¼] " + "="*20)
                print(f"**ğŸ’Š ì•½ë¬¼ ìƒí˜¸ì‘ìš© ìœ„í—˜ë„: {risk}**")
                print(f"**ğŸ’¡ ìƒì„¸ ì •ë³´:**")
                print(explanation)
                print("="*52)
            else:
                print("âŒ ë‘ ì•½ë¬¼ ì´ë¦„ì„ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”. ì˜ˆ: (A)ì•½ë¬¼ê³¼ (B)ì•½ë¬¼ì„ ê°™ì´ ë³µìš©í•´ë„ ë¼?")
        
        # ì•„ë¬´ íŒ¨í„´ì—ë„ í•´ë‹¹í•˜ì§€ ì•ŠëŠ” ê²½ìš°
        elif not match_component:
            print("ğŸ¤” ì£„ì†¡í•©ë‹ˆë‹¤. ì§ˆë¬¸ í˜•ì‹ì„ ì´í•´í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")
            print("   ì˜ˆ: (íƒ€ì´ë ˆë†€)ê³¼ (ì•„ìŠ¤í”¼ë¦°)ì„ ê°™ì´ ë³µìš©í•´ë„ ë¼?")
            print("   ì˜ˆ: (íƒ€ì´ë ˆë†€) ì„±ë¶„ì´ ë­ì•¼?")

# ì±—ë´‡ ì‹œì‘
if __name__ == "__main__":
    start_chatbot()
```eof
